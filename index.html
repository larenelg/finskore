<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">

        <title>Finskore</title>
        <link href="style.css" type="text/css" rel="stylesheet">

        <meta http-equiv="X-UA-Compatible" content="IE=edge">

        <link rel="icon" sizes="192x192" href="img/icon_192.png">
        <link rel="icon" sizes="32x32" href="img/icon_32.png">

        <link rel="apple-touch-icon" sizes="76x76"   href="img/apple-touch-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="120x120" href="img/apple-touch-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="152x152" href="img/apple-touch-icon-152x152.png">

        <meta property="og:title" content="Finskore -- browser based scoring app for Finska &amp; Klop">
        <meta property="og:image" content="img/cover.png">

    </head>
    <body>

        <div id="app" v-cloak v-bind:class="'theme-' + theme">

            <header>
                <h1>Finskore</h1>
                <p>Online scoring app for Finska, Klop &amp; Molkky</p>
            </header>

            <p v-show="!gameInProgress">
                <button @click="createNewGame()">Add Players</button>
            </p>

            <!-- DECLARE WINNER -->
            <section v-show="winner !== ''" class="winner">
                <h2>{{ winner }} Won!</h2>
                <p>
                    <button class="cancel" @click="winner=''">close</button>
                </p>
            </section>

            <!-- SETUP GAME -->
            <form v-if="setupGame" @submit.prevent="addPlayer" class="createGame">
                <h2>Add Players</h2>
                <p>
                    <label for="newPlayer">New Player</label>
                    <input type="text" name="newPlayer" id="newPlayer" maxlength="20" required v-model="newPlayer">
                    <button @click.prevent="addPlayer">Add to Game</button>
                </p>

                <p>
                    <label for="playTo">Play To</label>
                    <input type="number" min="12" max="1000" v-model.number="playToScore">
                </p>

                <p class="center">
                    <button @click.prevent="setupGame=false" class="cancel">close</button>
                    <button @click="startGame">Start Game</button>
                </p>
            </form>


            <!-- Enter players score for a turn -->
            <form class='enterScore' v-if="showScoreModal" @submit.prevent="saveScore()">

                <h2>{{ nameForScoring }} Score</h2>
                <p class="center">
                    <input type="number" name="addScore" id="addScore" max="12" min="-12" step="1" placeholder="0">
                    <button type="submit">Save</button>
                </p>

                <button v-if="!gameInProgress" @click.prevent="deletePlayer" class="warning">Delete</button>
                <button @click.prevent="showScoreModal=false" class="cancel">Cancel</button>
            </form>


            <!-- LEADERBOARD -->
            <section class="leaderboard">
                
                <div v-for="(p, index) in players"
                    @click="enterScoreForm(index)"
                    class="player"
                    v-bind:class="{struckout: hasStruckOut(p), myturn: whoseTurn === index, winning: p.position === 1}">

                    <div class='pos'>{{ showPosition(p.position) }}</div>
                    <div class="player">
                        <div class="name">{{ p.name }}</div>
                        <div class="strikes">{{ showStrikes(p) }}</div>
                    </div>
                    <div class="score">{{ p.score }}</div>
                    <div class="togo">{{ playToScore-p.score }}</div>
                </div>
            </section>

            <p v-show="players.length > 0" class="right" style="margin-top: 4rem;">
                <button @click="resetGame" class="warning">Reset Everything</button>
                <button @click="resetScores">Reset Scores</button>
            </p>


            <footer>
                <p>By <a href="https://www.mikehealy.com.au" rel="noopener">Mike Healy</a>. <a href="https://github.com/mike-healy/finskore" target="fsgh" rel="noopener">Finskore on Github</a></p>
            </footer>

        </div> <!-- /#app -->

        <script>
            document.body.style.minHeight = window.innerHeight + 'px';
        </script>

        <script src="js/vue.js"></script>
        <script src="js/app.js"></script>
    </body>
</html>